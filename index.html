<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>The Void</title>
    <style>
        :root { --void-color: #4a7aff; --ambience-color: #00ff88; }
        html, body { margin: 0; padding: 0; height: 100%; width: 100%; overflow: hidden; position: fixed; background: #000; touch-action: none; }
        body { display: flex; justify-content: center; align-items: center; font-family: 'Courier New', Courier, monospace; color: #ffffff; font-weight: 900; text-transform: uppercase; }

        /* --- BACKGROUNDS --- */
        .bg-layer { position: fixed; inset: 0; transition: opacity 1.2s ease; z-index: -2; }
        #bg-red { background: linear-gradient(to bottom, #000, #4a0000); opacity: 1; }
        #bg-gold { background: linear-gradient(to bottom, #000, #443700); opacity: 0; }
        #bg-blue { background: radial-gradient(ellipse at bottom center, var(--void-color) 0%, #050c1a 25%, #000 100%); opacity: 0; transition: opacity 1.2s ease; }
        #bg-green { background: radial-gradient(circle at center, rgba(0, 255, 136, 0.15) 0%, #000 70%); opacity: 0; transition: opacity 2s ease; }

        body.pad-active #bg-gold { opacity: 1; }
        body.balls-active #bg-blue { opacity: 1; }
        body.ambience-active #bg-green { opacity: 1; }
        body.pad-active #bg-red, body.balls-active #bg-red, body.ambience-active #bg-red { opacity: 0; }

        /* --- SHAPES --- */
        #particle-container { position: fixed; inset: 0; z-index: -1; pointer-events: none; transition: opacity 1s; }
        .shape { position: absolute; background: #880808; opacity: 0.6; bottom: -100px; animation: floatUp 10s linear infinite; transition: background 1.5s ease; }
        .circle { border-radius: 50%; }
        .square-shape { border-radius: 4px; }
        .triangle { background: transparent !important; width: 0 !important; height: 0 !important; border-left: 10px solid transparent; border-right: 10px solid transparent; border-bottom: 20px solid #880808; transition: border-bottom-color 1.5s ease; }

        body.pad-active .shape { background: #ffd700; }
        body.pad-active .triangle { border-bottom-color: #ffd700; }
        body.ambience-active .shape { background: var(--ambience-color); filter: blur(2px); }
        body.ambience-active .triangle { border-bottom-color: var(--ambience-color); }
        body.balls-active #particle-container { opacity: 0; }

        @keyframes floatUp { 0% { transform: translateY(0) rotate(0deg); opacity: 0; } 20% { opacity: 0.6; } 100% { transform: translateY(-130vh) rotate(360deg); opacity: 0; } }

        /* --- MENU --- */
        #main-menu { position: absolute; inset: 0; z-index: 100; transition: opacity 0.8s ease; }
        body.pad-active #main-menu, body.balls-active #main-menu, body.ambience-active #main-menu { opacity: 0; pointer-events: none; }
        .container { position: absolute; top: 50%; left: 50%; transform: translate(-50%, -50%); display: flex; flex-direction: column; align-items: center; text-align: center; width: 100%; transition: all 1s cubic-bezier(0.65, 0, 0.35, 1); }

        .welcome-text, .the-text { letter-spacing: 10px; opacity: 0.6; font-size: 0.8rem; margin-bottom: 5px; }
        .void { color: #880808; text-shadow: 0 0 30px rgba(136, 8, 8, 0.6); font-size: 6rem; letter-spacing: 15px; line-height: 0.85; margin: 10px 0; }
        .anything { display: block; margin-top: 10px; font-size: 1rem; font-style: italic; opacity: 0.5; letter-spacing: 6px; text-transform: none; }

        .action-zone { position: relative; margin-top: 40px; height: 60px; display: flex; align-items: center; justify-content: center; width: 100%; }
        .enter-btn { padding: 18px 70px; color: #fff; background: none; border: 2px solid #880808; border-radius: 50px; cursor: pointer; font-family: inherit; font-weight: 900; letter-spacing: 5px; transition: 0.4s; z-index: 2; }

        .pick-text { opacity: 0; letter-spacing: 4px; font-size: 1.2rem; color: #fff; position: absolute; transition: 0.8s ease; pointer-events: none; white-space: nowrap; }

        .grid-container { position: absolute; z-index: 999; opacity: 0; pointer-events: none; display: grid; gap: 15px; transition: all 1.2s ease 0.4s; }
        .grid-btn { background: transparent; border: 2px solid #555; color: white; cursor: pointer; border-radius: 12%; font-family: inherit; font-weight: 900; transition: 0.3s; width: 110px; height: 110px; }

        .footer-text { position: absolute; bottom: 20px; width: 100%; text-align: center; font-size: 0.7rem; letter-spacing: 3px; opacity: 0.4; pointer-events: none; }

        .show-grid .container { top: 22%; }
        .show-grid .grid-container { opacity: 1; pointer-events: auto; }
        .show-grid .enter-btn { opacity: 0; pointer-events: none; }
        .show-grid .pick-text { opacity: 1; }

        /* --- APPS --- */
        .app-overlay { position: fixed; inset: 0; z-index: 10000; opacity: 0; visibility: hidden; transition: 0.8s; display: flex; align-items: center; justify-content: center; }
        .app-overlay.active { opacity: 1; visibility: visible; }

        .pad-layout { display: flex; width: 95%; height: 95%; gap: 20px; padding: 20px; box-sizing: border-box; }
        .pad-sidebar { min-width: 150px; display: flex; flex-direction: column; align-items: center; color: #ffd700; gap: 15px; border-right: 1px solid rgba(255, 215, 0, 0.2); }
        .writing-container { flex-grow: 1; display: flex; flex-direction: column; gap: 10px; height: 100%; }
        .writing-area { flex-grow: 1; background: rgba(5,5,5,0.95); border: 2px solid #ffd700; border-radius: 20px; padding: 25px; color: #ffd700; outline: none; overflow-y: auto; text-transform: none; font-weight: normal; font-size: 1.1rem; }

        #ball-cursor { position: fixed; width: 60px; height: 60px; border: 2px solid white; border-radius: 50%; pointer-events: none; z-index: 10001; transform: translate(-50%, -50%); display: none; box-shadow: 0 0 15px rgba(255, 255, 255, 0.3); }

        .sidebar-balls { position: fixed; right: 20px; bottom: 20px; display: flex; flex-direction: column; gap: 10px; z-index: 10001; }
        .ui-group { background: rgba(10, 15, 30, 0.9); border: 1px solid var(--void-color); border-radius: 12px; padding: 12px; width: 140px; display: flex; flex-direction: column; gap: 8px; }
        .ui-btn { padding: 10px; background: rgba(255,255,255,0.05); border: 1px solid currentColor; border-radius: 8px; cursor: pointer; font-size: 0.7rem; text-align: center; transition: 0.3s; color: inherit; }
        .ui-btn.active { background: #fff !important; color: #000 !important; }
        .hex-input { background: rgba(255,255,255,0.05); border: 1px solid var(--void-color); border-radius: 8px; color: var(--void-color); padding: 8px; text-align: center; outline: none; width: 90%; align-self: center; font-family: inherit; }

        /* MOVED TO CORNER */
        .ambience-ui { position: absolute; bottom: 20px; right: 20px; }

        @media (max-width: 600px) {
            .pad-layout { flex-direction: column; }
            .pad-sidebar { border-right: none; border-bottom: 1px solid rgba(255, 215, 0, 0.2); min-width: 100%; flex-direction: row; flex-wrap: wrap; justify-content: center; padding-bottom: 10px; }
            .sidebar-balls { right: 10px; bottom: 10px; transform: scale(0.9); transform-origin: bottom right; }
            .grid-container { grid-template-columns: repeat(2, 120px); bottom: 15%; left: 50%; transform: translateX(-50%); }
            .void { font-size: 4rem; }
            .ambience-ui { bottom: 10px; right: 10px; }
        }
        @media (min-aspect-ratio: 1/1) {
            .show-grid .container { left: 30%; top: 50%; transform: translate(-50%, -50%); }
            .grid-container { grid-template-columns: repeat(3, 120px); left: 70%; top: 50%; transform: translate(-50%, -50%); }
        }
    </style>
</head>
<body>
    <div id="bg-red" class="bg-layer"></div>
    <div id="bg-gold" class="bg-layer"></div>
    <div id="bg-blue" class="bg-layer"></div>
    <div id="bg-green" class="bg-layer"></div>
    <div id="particle-container"></div>
    <div id="ball-cursor"></div>

    <div id="main-menu">
        <div class="container">
            <span class="welcome-text">Welcome to</span>
            <span class="the-text">The</span>
            <div class="void">VOID</div>
            <span class="anything">think of anything</span>
            <div class="action-zone">
                <button class="enter-btn" onclick="startExperience()">ENTER</button>
                <div class="pick-text">PICK AN OPTION</div>
            </div>
        </div>
        <div class="grid-container">
            <button class="grid-btn" style="color:#ffd700; border-color:#ffd700;" onclick="openApp('pad')">THE PAD</button>
            <button class="grid-btn" style="color:#007FFF; border-color:#007FFF;" onclick="openApp('balls')">THE BALLS</button>
            <button class="grid-btn" style="color:var(--ambience-color); border-color:var(--ambience-color);" onclick="openApp('ambience')">AMBIENCE</button>
            <button class="grid-btn">???</button>
            <button class="grid-btn">???</button>
            <button class="grid-btn">???</button>
        </div>
        <div class="footer-text">MADE BY STEAM LABS. V1.2</div>
    </div>

    <div id="ambience-app" class="app-overlay">
        <div class="ambience-ui">
            <button class="ui-btn" style="color:var(--ambience-color); width: 110px;" onclick="closeApp()">RETURN</button>
        </div>
    </div>

    <div id="pad-app" class="app-overlay">
        <div class="pad-layout">
            <div class="pad-sidebar">
                <h2 style="letter-spacing:5px; font-size: 1rem;">THE PAD</h2>
                <button class="ui-btn" style="color:#ffd700; min-width: 80px;" onclick="document.execCommand('bold')">BOLD</button>
                <button class="ui-btn" style="color:#ffd700; min-width: 80px;" onclick="document.execCommand('italic')">ITALIC</button>
                <button class="ui-btn" style="color:#ffd700; min-width: 80px;" onclick="closeApp()">RETURN</button>
            </div>
            <div class="writing-container">
                <div class="writing-area" contenteditable="true">Write your thoughts here...</div>
            </div>
        </div>
    </div>

    <div id="balls-app" class="app-overlay">
        <canvas id="canvas"></canvas>
        <div class="sidebar-balls">
            <div class="ui-group">
                <div style="color:var(--void-color); font-size:0.5rem; text-align:center;">COLOR</div>
                <input type="text" class="hex-input" placeholder="#4A7AFF" oninput="changeVoidColor(this.value)">
                <div style="color:var(--void-color); font-size:0.5rem; text-align:center;">SIZE</div>
                <input type="range" min="0.2" max="4" step="0.1" value="1" oninput="ballSizeMultiplier = this.value">
            </div>
            <div class="ui-group">
                <div id="grav-btn" class="ui-btn" style="color:var(--void-color);" onclick="toggleGravity()">GRAVITY</div>
                <div id="freeze-btn" class="ui-btn" style="color:var(--void-color);" onclick="toggleFreeze()">FREEZE</div>
                <div class="ui-btn" style="color:var(--void-color);" onclick="addBall()">+ BALL</div>
                <div class="ui-btn" style="color:var(--void-color);" onclick="removeBall()">- BALL</div>
                <div class="ui-btn" style="color:#fff;" onclick="closeApp()">RETURN</div>
            </div>
        </div>
    </div>

    <script>
        let audioCtx, balls = [], ballSizeMultiplier = 1, currentColor = "#4A7AFF";
        let gravity = false, freeze = false, mouse = { x: -500, y: -500, radius: 30 };
        let ambientOsc, ambientGain;

        const canvas = document.getElementById('canvas');
        const ctx = canvas.getContext('2d');
        const bCursor = document.getElementById('ball-cursor');

        function initAudio() {
            if (!audioCtx) audioCtx = new (window.AudioContext || window.webkitAudioContext)();
            if (audioCtx.state === 'suspended') audioCtx.resume();
        }

        function startExperience() {
            initAudio();
            document.getElementById('main-menu').classList.add('show-grid');
        }

        function openApp(mode) {
            closeApp();
            document.body.classList.add(`${mode}-active`);
            document.getElementById(`${mode}-app`).classList.add('active');
            if(mode === 'balls') {
                bCursor.style.display = 'block';
                if(balls.length === 0) initBalls();
            }
            if(mode === 'ambience') startAmbience();
        }

        function closeApp() {
            document.body.classList.remove('pad-active', 'balls-active', 'ambience-active');
            document.querySelectorAll('.app-overlay').forEach(a => a.classList.remove('active'));
            if(bCursor) bCursor.style.display = 'none';
            stopAmbience();
        }

        function startAmbience() {
            initAudio();
            ambientOsc = audioCtx.createOscillator();
            ambientGain = audioCtx.createGain();
            ambientOsc.type = 'sine';
            ambientOsc.frequency.setValueAtTime(50, audioCtx.currentTime);
            ambientGain.gain.setValueAtTime(0, audioCtx.currentTime);
            ambientGain.gain.linearRampToValueAtTime(0.15, audioCtx.currentTime + 2);
            ambientOsc.connect(ambientGain);
            ambientGain.connect(audioCtx.destination);
            ambientOsc.start();
        }

        function stopAmbience() {
            if(ambientGain) {
                ambientGain.gain.exponentialRampToValueAtTime(0.0001, audioCtx.currentTime + 0.5);
                setTimeout(() => { if(ambientOsc) try { ambientOsc.stop(); } catch(e) {} }, 600);
            }
        }

        function toggleGravity() { gravity = !gravity; document.getElementById('grav-btn').classList.toggle('active'); }
        function toggleFreeze() { freeze = !freeze; document.getElementById('freeze-btn').classList.toggle('active'); }
        function addBall() { balls.push(createBall()); }
        function removeBall() { balls.pop(); }

        function changeVoidColor(val) {
            if (/^#?([0-9A-F]{3}){1,2}$/i.test(val)) {
                let hex = val.startsWith('#') ? val : '#' + val;
                currentColor = hex;
                document.documentElement.style.setProperty('--void-color', hex);
            }
        }

        function createBall() {
            return {
                x: Math.random()*(window.innerWidth-100)+50, y: Math.random()*(window.innerHeight-100)+50,
                vx: (Math.random()-0.5)*10, vy: (Math.random()-0.5)*10,
                baseR: Math.random()*15+10
            };
        }

        function initBalls() {
            canvas.width = window.innerWidth; canvas.height = window.innerHeight;
            for(let i=0; i<15; i++) balls.push(createBall());
            loop();
        }

        function resolveCollision(b1, b2) {
            const dx = b2.x - b1.x, dy = b2.y - b1.y, distance = Math.hypot(dx, dy);
            const minDistance = (b1.baseR * ballSizeMultiplier) + (b2.baseR * ballSizeMultiplier);
            if (distance < minDistance && distance > 0) {
                const angle = Math.atan2(dy, dx), cos = Math.cos(angle), sin = Math.sin(angle);
                const overlap = minDistance - distance;
                b1.x -= cos * (overlap/2); b1.y -= sin * (overlap/2);
                b2.x += cos * (overlap/2); b2.y += sin * (overlap/2);
                const nx = dx / distance, ny = dy / distance;
                const p = 2 * (b1.vx * nx + b1.vy * ny - b2.vx * nx - b2.vy * ny) / 2;
                b1.vx -= p * nx; b1.vy -= p * ny;
                b2.vx += p * nx; b2.vy += p * ny;
            }
        }

        function loop() {
            if(!document.body.classList.contains('balls-active')) return requestAnimationFrame(loop);
            ctx.clearRect(0,0,canvas.width,canvas.height);
            balls.forEach((b, i) => {
                let r = b.baseR * ballSizeMultiplier;
                if(!freeze) {
                    if(gravity) b.vy += 0.4;
                    b.x += b.vx; b.y += b.vy;
                    b.vx *= 0.99; b.vy *= 0.99;
                }
                let dx = b.x - mouse.x, dy = b.y - mouse.y, dist = Math.hypot(dx, dy), minDist = r + mouse.radius;
                if (dist < minDist) {
                    let angle = Math.atan2(dy, dx), tx = mouse.x + Math.cos(angle)*minDist, ty = mouse.y + Math.sin(angle)*minDist;
                    b.vx += (tx - b.x)*0.25; b.vy += (ty - b.y)*0.25;
                    b.x = tx; b.y = ty;
                }
                if(b.x < r) { b.x = r; b.vx *= -0.8; }
                if(b.x > canvas.width - r) { b.x = canvas.width - r; b.vx *= -0.8; }
                if(b.y < r) { b.y = r; b.vy *= -0.8; }
                if(b.y > canvas.height - r) { b.y = canvas.height - r; b.vy *= -0.8; }
                for(let j=i+1; j<balls.length; j++) resolveCollision(b, balls[j]);
                ctx.beginPath(); ctx.arc(b.x, b.y, r, 0, Math.PI*2);
                ctx.fillStyle = currentColor; ctx.globalAlpha = 0.8; ctx.fill(); ctx.globalAlpha = 1.0;
            });
            requestAnimationFrame(loop);
        }

        const handleMove = (e) => {
            const clientX = e.touches ? e.touches[0].clientX : e.clientX;
            const clientY = e.touches ? e.touches[0].clientY : e.clientY;
            mouse.x = clientX; mouse.y = clientY;
            if(bCursor) { bCursor.style.left = clientX + 'px'; bCursor.style.top = clientY + 'px'; }
            if(ambientOsc && document.body.classList.contains('ambience-active')) {
                ambientOsc.frequency.setTargetAtTime(40 + (clientX / 15), audioCtx.currentTime, 0.1);
            }
        };

        window.addEventListener('mousemove', handleMove);
        window.addEventListener('touchstart', handleMove);
        window.addEventListener('touchmove', (e) => { 
            if(document.body.classList.contains('balls-active') || document.body.classList.contains('ambience-active')) {
                e.preventDefault(); 
            }
            handleMove(e); 
        }, { passive: false });

        window.onresize = () => { canvas.width = window.innerWidth; canvas.height = window.innerHeight; };

        (function initShapes() {
            const container = document.getElementById('particle-container');
            const types = ['circle', 'square-shape', 'triangle'];
            for (let i = 0; i < 40; i++) {
                const shape = document.createElement('div');
                shape.className = `shape ${types[Math.floor(Math.random()*3)]}`;
                shape.style.width = '20px'; shape.style.height = '20px';
                shape.style.left = Math.random() * 100 + '%';
                shape.style.animationDuration = (Math.random() * 5 + 7) + 's';
                container.appendChild(shape);
            }
        })();
    </script>
</body>
</html>
